asyncapi: '2.4.0'
info:
  title: MarksPublisher
  version: '1.0.0'
  description: |
    Publisher for marks on virtual school

servers:
  test:
    url: test.myrabbitcluster.org:5672
    protocol: AMQP
    description: Test broker


defaultContentType: application/json

channels:
  federal-subscribe:
    subscribe:
      operationId: subscribefed
      message:
        $ref: '#/components/messages/markChanges'

  telegram-subscribe:
    subscribe:
      operationId: subscribetel
      message:
        $ref: '#/components/messages/markChanges'

components:
  messages:
    markChanges:
      name: Mark change
      title: mark change
      summary: something happened with mark in vs system.
      contentType: application/json
      payload:
        $ref: "#/components/schemas/markChanges"


  schemas:
    markChanges:
      type: object
      properties:
        typeOfEvent:
          type: string
          description: type of event happened.
        Fullname:
          type: string
          description: Full name of student
        Id:
          type: integer
          description: Id of student
        nameOfSubject:
          type: string
          description: name of subject
        SubjectId:
          type: integer
          description: id of subject
        Rate:
          type: integer
          description: rate for event